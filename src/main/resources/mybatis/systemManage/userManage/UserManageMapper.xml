<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UserManageMapper">
	<!-- 查询 -->
	<select id="selectUserlistPage" parameterType="page" resultType="pd">
		select * from ry_user
		<if test="pd.condition != null and pd.condition != ''">
			where ${pd.condition} like concat("%",#{pd.conditionVal},"%")
		</if>
		order by available,username
	</select>

	<!-- 保存用户 -->
	<insert id="saveUser" parameterType="pd" >
		insert into ry_user(
			userid,
			username,
			password,
			available
		)values(
			#{userid},
			#{username},
			#{password},
			#{available}
		)
	</insert>

	<!-- 根据用户名查询是否有记录 -->
	<select id="isHasSaveAccount" parameterType="pd" resultType="pd">
		select username from ry_user where username = #{username}
	</select>

	<!-- 激活用户 -->
	<update id="activativeAccount" parameterType="pd">
		update ry_user set
			available = #{available}
		where
			userid = #{userid}
	</update>

	<!-- 修改用户 -->
	<update id="editUser" parameterType="pd">
		update ry_user set
			password = #{password}
		where
			userid = #{userid}
	</update>

	<!-- 删除用户 -->
	<delete id="delUser" parameterType="pd">
		delete from ry_user where userid = #{userid}
	</delete>
</mapper>