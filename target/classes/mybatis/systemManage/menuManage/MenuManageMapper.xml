<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MenuManageMapper">
	<!-- 查询 -->
	<select id="selectMenulistPage" parameterType="page" resultType="pd">
		select * from ry_permission
	</select>

	<!-- 保存菜单 -->
	<insert id="saveMenu" parameterType="pd">
		insert into ry_permission(
			per_id,
			per_name,
		<if test="parentid != null and parentid != ''">
			parentid,
		</if>
			url,
			orders,
		<if test="isheader != null and isheader != ''">
			isheader,
		</if>
		<if test="parentname != null and parentname != ''">
			parentname,
		</if>
			ismenuorpoint
		)values(
			#{per_id},
			#{per_name},
		<if test="parentid != null and parentid != ''">
			#{parentid},
		</if>
			#{url},
			#{orders},
		<if test="isheader != null and isheader != ''">
			#{isheader},
		</if>
		<if test="parentname != null and parentname != ''">
			#{parentname},
		</if>
			#{ismenuorpoint}
		)
	</insert>

	<!-- 查询所有菜单根目录 -->
	<select id="returnZtreeMenuRootData" parameterType="pd"  resultType="pd">
		select
			*
		from
			ry_permission
		where
			isheader = #{isheader}
		and
			ismenuorpoint = #{ismenuorpoint}
		order by orders asc
	</select>


	<!-- 根据权限id查询所有自权限 -->
	<select id="findSonMenu" parameterType="pd" resultType="pd">
		select
			*
		from
			ry_permission
		where
			parentid = #{id}
		order by orders asc
	</select>
</mapper>